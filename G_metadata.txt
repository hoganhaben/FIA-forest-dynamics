# Metadata for G_dataset.Rdata
# J. Aaron Hogan
# hogan.jaaron@ufl.edu
# 10.18.2022

---

Overview: 
The create_G.R script uses the USFS FIA state data tables (the TREE, PLOT, CONDITION, and SURVEY tables) to create a processed data product for plot-level biomass growth that is used in model fitting.  Two methods are used to calculate plot-level biomass growth: 1) a plot mass balance method and 2) a summed tree-incremental growth method (see supplemental information of main paper for additional details). Plot-level biomass stock at t1 and t2 (the first and second plot measurements), and several other useful quantities (e.g, the amount of harvested or dead biomass over two measurement periods) are calculated. Derived quantities in the G_dataset are described below.

---

Variable descriptions:
pltID: a unique plot identifier, denoted a the concatenated UNITCD, STATECD, COUNTYCD, and PLOT number (separated by "_").

CN: The FIA PLOT table Sequence Number, which uniquely identifies a plot record at the t2 (second of two) plot measurements.

PREV_PLT_CN: The USFS PLOT table Sequence Number at the t1 (first of two) plot measurements.

MEASYEAR: The year in which the plot was measured at the t2 measurement.

INVYR: The USFS panel year which best represents when the t2 inventory data were collected.

REMPER: The USFS remeasurement period, defined as the number of years between successive plot measurements (accurate to the 0.1 years).

LAT: Plot latitude in decimal degrees using the NAD83 datum.

LON: Plot longitude in decimal degrees using the NAD83 datum.

ECOSUBCD: The USFS ecological subsection code, defined as areas of the same surface geology, soil conditions, climate, and potential natural forest communities. See Cleland et al 2007 (http://www.treesearch.fs.fed.us/pubs/48672), and additional details in the FIA DB user guide (https://www.fia.fs.usda.gov/library/database-documentation/index.php).

STATE: Two-letter state abbreviation. 

B_plt_t1_MgHa: The plot biomass in Mg/Ha at the t1 measurement, calculated as the summed product of tree biomass (DRY_BIO) and FIA expansion factors (TPHa) for all living trees at t1. 

B_plt_t2_MgHa: The plot biomass in Mg/Ha at the t2 measurement, calculated as the summed product of tree biomass (DRY_BIO) and FIA expansion factors (TPHa) for all living trees at t2. 

B_dead_MgHa: The biomass of dead trees in Mg/Ha over a plot interval, calculated as the summed product of tree biomass (DRY_BIO) and FIA expansion factors (TPHa) for all dead trees at t2 that were alive at t1. 

B_cut_MgHa: The biomass of harvested trees in Mg/Ha over a plot interval, calculated as the summed product of tree biomass (DRY_BIO) and FIA expansion factors (TPHa) for all harvested trees at t2 that were alive at t1. 

B_ingrow_MgHa: The biomass of ingrowth trees in Mg/Ha over a plot interval, calculated as the summed product of tree biomass (DRY_BIO) and FIA expansion factors (TPHa) for all new trees.

B_surv_MgHa: The biomass of surving trees (excluding ingrowth) in Mg/Ha over a plot interval, calculated as the summed product of tree biomass (DRY_BIO) and FIA expansion factors (TPHa) for all trees alive at both t1 and t2.  

G_MassBal_MgHaYr: Mass-balance plot-level growth in Mg/Ha/Yr, caculated as the difference between the plot-level t2 and t1 biomasses plus the biomass losses to due tree moratlity or harvest [((B_plt_t2 - B_plt_t1) + B_dead + B_cut) / REMPER].

G_obs_TreeInc_MgHaYr: The observed plot-level summed tree-incremental growth in Mg/Ha/Yr, calculated as the cumulative sum of t2 tree biomass minus t1 tree biomass times FIA expansion factor for all surviving and new trees [Σ((B_t2 - B_t1) * TPHa) REMPER].  New trees are assumed to have zero biomass at t1. 

B_L_prop:  The proportion of lost biomass from t1 to t2, calcualed as (B_dead + Bcut) / B_plt_t1.
 
G_pot_TreeInc_MgHaYr: The potential plot-level biomass growth in Mg/Ha/Yr (summed tree incremental method), corrected (linearly) for biomass loss (which assumed perfect or 100% B_L compensation).  It is calculated as G_obs_TreeInc_MgHaYr / (1 - B_L_prop).

nTree_rec: The number of new trees recorded over a plot remeasurement period.  New trees are those recruiting to the 12.7cm size class in an FIA plot.

nTrees_t1: The number of tree records at t1.

nTrees_t2:  The number of tree records at t2.

nTrees_both: The number of shared tree records between t1 and t2.

nIngrowTrees: The number of ingrowth trees recorded over a plot remeasurement period.  Ingrowth trees are trees in microplots with dbh < 2.54 cm at t1 and dbh ≥ 2.54 cm at t2. 

Ingrowth: A logical (T/F) factor denoting if plot ingrowth occurred over the remeasurement period.

nDeadTrees: The number of naturally-occurring dead trees recorded over a plot remeasurement period.

Mortality: A logical factor denoting if tree mortality occurred in a plot over the remeasurement period.

nCutTrees: The number of harvest trees recorded over a plot remeasurement period.

Harvest: A logical factor denoting if timber harvest occurred in a plot over the remeasurement period.

PREVDIA_NA: The number of trees with missing diameters at t1.

TPHa_Match: The number of tree records in the plot where the TPHa at t1 matched the TPHa at t2.

TPHa_Match_percent: The percentage of tree records in the plot where the TPHa at t1 matched the TPHa at t2 (n matches / total).

MEASTIME_t1: The decimal-year t1 measurement time of the plot, calculated from FIA PLOT table as MEASYEAR + (MEASMON-0.5)/12.

MEASTIME_t2: The decimal-year t2 measurement time of the plot, calculated from FIA PLOT table as MEASYEAR + (MEASMON-0.5)/12.

MEASTIME_REMPER: The calculated re-measurement period (REMPER), defined as MEASITME_t2 - MEASTIME_t1.

diff_T: Comparison between FIA-reported REMPER and MEASTIME_REMPER, defined as MEASTIME_REMPER - REMPER.

STDAGE_t2: The FIA reported stand age at t2 from the FIA CONDITION table. Stand age is estimated using tree core data (See FIA DB and field methods documentation). Annual inventory data have stand ages assigned to the nearest year.

STDORGCD: The Stand Origin Code from the FIA CONDITION table for that plot record at t2.  Zero denotes natural stands, and one denotes a plot with clear evidence of artificial regeneration. 

CONDPROP_UNADJ: The Condition Proportion Unadjusted from the FIA CONDITION table for that plot record at t2. The unadjusted proportion of the FIA plot that is in the condition.

SITECLCD: The Site Productivity Class code from the FIA CONDITION table for that plot record at t2.  The classes are (in ft^3 wood production/ac/yr): class 1: 225+, class 2: 165-224, class 3: 120-164, class 4: 85-119, class 5: 50-84, class 6: 20-49, and class 7: 0-19.

STDSZCD: The Stand-size Class Code from the FIA CONDITION table for that plot record at t2. Codes 1-3 denote stocked first stand (i.e., those with a predominant diameter of live trees - stocking values of at least 10), whereas codes 5 denote non-stocked stands (i.e., forest lands with <10 live stocking values). 

COND_STATUS_CD: The Condition Status Code from the FIA CONDITION table, which indicates the basic land classification.  Classification 1 denotes accessible forest land, whereas classifications 2-5 do not (see FIA_DB User Guide for more details). 

P3_OZONE_IND: Phase 3 Ozone Indicator (logical) from the FIA SURVEY table.  Y denotes surveys that are part of the P3 Ozone inventories. 

ANN_INVENTORY: Annual Inventory indicator from the FIA SURVEY table. Y means that the inventory is annual (as opposed to periodic). 

ECOPROVCD: The USFS ecological province code, which are landscape scale classifications of US forest areas.  Refactored from ECOSUBCD, as a higher-order classification (see Cleland et al 2007). 

MEASTIME_avg: The average of MEASTIME_t1 and MEASTIME_t1 (i.e., the plot remeasurement midpoint). 

STDAGE_t1: the FIA reported stand age at t1 from the FIA CONDITION table. (details describing STDAGE_t2 apply here, also).

diff_STDAGE: The difference between STDAGE_t2 and STDAGE_t1 

---

Notes & other considerations: 

1. Unit conversions - Before any calculations, units were converted from imperial/standard units to metric equivalents (e.g., from per acres to per hectare values for FIA expansion factors, and lbs to Mg for tree dry biomass values).

2. The archived dataset has undergone plot selection (i.e., filtering). Seven plot selection criteria were used: a) excluded plantation forests, b) only including plots with a single condition using a 95% threshold for CONDPROP_UNADJ, c) excluding non-productive stands, d) excluding non-stocked stands, e) excluding non-accessible forest plots, f, and g) only including data from FIA annual inventories, 

3. Quntile threshold cleaning for outliers and discrepancies in growth among the two methods (mass balance vs. summed tree incremental growth) was done after dataset generation. (see .Rmd files for growth analyses). 
